<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/kognise/water.css@latest/dist/light.min.css">
    <script type="application/javascript" src="./playground.js"></script>
    <script type="application/javascript" src="./mermaid.js"></script>
    <link rel="stylesheet" type="text/css" href="./prism.css">
    <script>mermaid.initialize({startOnLoad:true,flowchart:{useMaxWidth:false}});</script>
    <script>
      Temporal = { ...temporal.Temporal };
      Object.assign(Intl, temporal.Intl);
    </script>
    <style>
      /* https://github.com/kognise/water.css/blob/master/src/variables-light.css */
      :root {
        --background: #efefef;
        --text-muted: #999999;
        --text-bright: #000000;
        --text-width: 900px;
        --variable: #39a33c;
      }
      .mermaid svg { height: 13em; }
      body {
        font-size: 18px;
        max-width: var(--text-width);
        padding-top: 40px;  /* extra padding for banner */
      }
      pre { border-left: 4px solid var(--variable); }
      pre code[class*="language-"] { font-size: 0.85em; }
      pre[class*="language-"] { padding: 0.5em; }
      h2 { border-bottom: 2px solid var(--text-muted); margin-top: 2em; }
      h3 {
        border-bottom: 1px solid var(--text-muted);
        color: var(--text-muted);
        font-weight: normal;
      }
      h3 em { font-weight: bold; }
      h3 strong { color: var(--text-bright); }
      :not(h2) + h3 { margin-top: 2em; }
      footer {
        border-top: 1px solid var(--background);
        color: var(--text-muted);
        font-size: 0.8em;
        margin-top: 2em;
        padding-top: 10px;
      }
      .heading-link {
        left: calc((100vw - var(--text-width)) / 2 - 1.5em);
        opacity: 0;
        position: absolute;
        transition: opacity 150ms;
      }
      .heading-link:hover { text-decoration: none; }
      .heading-link::before { content: 'Â¶'; }
      h3:hover .heading-link { opacity: 1; }
      .banner {
        /* Gradient from https://joshnh.com/weblog/how-to-make-an-alert-bar/ */
        background-color: #fce94f;
        background-image: linear-gradient(135deg,
                                          transparent,
                                          transparent 25%,
                                          rgba(0, 0, 0, .05) 25%,
                                          rgba(0, 0, 0, .05) 50%,
                                          transparent 50%,
                                          transparent 75%,
                                          rgba(0, 0, 0, .05) 75%,
                                          rgba(0, 0, 0, .05));
        background-size: 20px 20px;
        box-shadow: 0 5px 0 rgba(0, 0, 0, .1);
        left: 0;
        padding: 0.4em 0;
        position: absolute;
        text-align: center;
        top: 0;
        width: 100vw;
      }
    </style>
  </head>
  <body>
    <div class="banner">
      <strong>This polyfill is a work in progress.</strong>
      It does not represent the final API of this proposal, nor even the current consensus.
    </div>
<h1 id="temporal-cookbook-1">Temporal Cookbook</h1>
<h2 id="overview-1">Overview</h2>
<ul>
<li><a href="#running-the-cookbook-files">Running the cookbook files</a>
</li>
<li><a href="#frequently-asked-questions">Frequently Asked Questions</a>
<ul>
<li><a href="#current-date-and-time">Current date and time</a>
</li>
<li><a href="#unix-timestamp">Unix timestamp</a>
</li>
</ul>
</li>
<li><a href="#converting-between-temporal-types-and-legacy-date">Converting between Temporal types and legacy Date</a>
<ul>
<li><a href="#absolute-from-legacy-date">Absolute from legacy Date</a>
</li>
</ul>
</li>
<li><a href="#construction">Construction</a>
<ul>
<li><a href="#time-zone-object-from-name">Time zone object from name</a>
</li>
</ul>
</li>
<li><a href="#serialization">Serialization</a>
<ul>
<li><a href="#zoned-instant-from-instant-and-time-zone">Zoned instant from instant and time zone</a>
</li>
</ul>
</li>
<li><a href="#sorting">Sorting</a>
<ul>
<li><a href="#sort-datetimes">Sort DateTimes</a>
</li>
<li><a href="#sort-iso-datetime-strings">Sort ISO date/time strings</a>
</li>
</ul>
</li>
<li><a href="#time-zone-conversion">Time zone conversion</a>
<ul>
<li><a href="#preserving-absolute-instant">Preserving absolute instant</a>
</li>
<li><a href="#utc-offset-for-a-zoned-event-as-a-string">UTC offset for a zoned event, as a string</a>
</li>
<li><a href="#utc-offset-for-a-zoned-event-as-a-number-of-seconds">UTC offset for a zoned event, as a number of seconds</a>
</li>
<li><a href="#offset-between-two-time-zones-at-an-instant">Offset between two time zones at an instant</a>
</li>
</ul>
</li>
<li><a href="#arithmetic">Arithmetic</a>
<ul>
<li><a href="#unit-constrained-duration-between-now-and-a-pastfuture-zoned-event">Unit-constrained duration between now and a past/future zoned event</a>
</li>
<li><a href="#comparison-of-an-instant-to-business-hours">Comparison of an instant to business hours</a>
</li>
<li><a href="#flight-arrivaldepartureduration">Flight arrival/departure/duration</a>
</li>
<li><a href="#nth-weekday-of-the-month">Nth weekday of the month</a>
</li>
</ul>
</li>
</ul>

<h2 id="running-the-cookbook-files-1">Running the cookbook files</h2>
<p>Running cookbook files:</p>
<pre class="language-bash"><code class="language-bash">node --experimental-modules --no-warnings <span class="token punctuation">\</span>
    --icu-data-dir ./polyfill/node_modules/full-icu/ <span class="token punctuation">\</span>
    -r ./polyfill/index.js ./docs/cookbook/<span class="token variable">${cookbookFile}</span></code></pre><p><em>The above code allows <code>Temporal</code> to exist as a global object before the cookbook file runs.</em></p>
<h2 id="frequently-asked-questions-1">Frequently Asked Questions</h2>
<p>These are some of the most common tasks that people ask questions about on StackOverflow with legacy Date.
Here&#39;s how they would look using Temporal.</p>
<h3 id="current-date-and-time"><a class="heading-link" href="#current-date-and-time"></a>Current date and time</h3><p>How to get the current date and time in the local time zone?</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">/**
 * Get the current date in JavaScript
 * This is a popular question on Stack Overflow for dates in JS
 * https://stackoverflow.com/questions/1531093/how-do-i-get-the-current-date-in-javascript
 *
 */</span>

<span class="token keyword">const</span> dateTime <span class="token operator">=</span> Temporal<span class="token punctuation">.</span>now<span class="token punctuation">.</span><span class="token function">dateTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Gets the current date</span>
dateTime<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// returns the date in ISO 8601 date format</span>
</code></pre><h3 id="unix-timestamp"><a class="heading-link" href="#unix-timestamp"></a>Unix timestamp</h3><p>How to get a Unix timestamp?</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">/**
 * Get a (Unix) timestamp in JavaScript
 * This is the No.1 voted question on Stack Overflow for dates in JS
 * https://stackoverflow.com/questions/221294/how-do-you-get-a-timestamp-in-javascript
 *
 */</span>

<span class="token keyword">const</span> timeStamp <span class="token operator">=</span> Temporal<span class="token punctuation">.</span>now<span class="token punctuation">.</span><span class="token function">absolute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Timestamp in Milliseconds</span>
timeStamp<span class="token punctuation">.</span><span class="token function">getEpochMilliseconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Timestamp in Seconds</span>
timeStamp<span class="token punctuation">.</span><span class="token function">getEpochSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h2 id="converting-between-temporal-types-and-legacy-date-1">Converting between Temporal types and legacy Date</h2>
<h3 id="absolute-from-legacy-date"><a class="heading-link" href="#absolute-from-legacy-date"></a>Absolute from legacy Date</h3><p>Map a legacy ECMAScript Date instance into a Temporal.Absolute instance corresponding to the same instant in absolute time.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> legacyDate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'1970-01-01T00:00:01Z'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Convert legacy Date to Temporal.Absolute</span>
<span class="token keyword">const</span> absolute <span class="token operator">=</span> Temporal<span class="token punctuation">.</span>Absolute<span class="token punctuation">.</span><span class="token function">fromEpochMilliseconds</span><span class="token punctuation">(</span>legacyDate<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">assert</span><span class="token punctuation">(</span>absolute <span class="token keyword">instanceof</span> <span class="token class-name">Temporal<span class="token punctuation">.</span>Absolute</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h2 id="construction-1">Construction</h2>
<h3 id="time-zone-object-from-name"><a class="heading-link" href="#time-zone-object-from-name"></a>Time zone object from name</h3><p><code>Temporal.TimeZone.from()</code> can convert an IANA time zone name into a <code>Temporal.TimeZone</code> object.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">// Construct a Temporal.TimeZone from an IANA name:</span>
<span class="token keyword">const</span> tz <span class="token operator">=</span> Temporal<span class="token punctuation">.</span>TimeZone<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'Europe/London'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Cast the timezone back to an IANA name, two ways:</span>
tz<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Europe/London</span>
tz<span class="token punctuation">.</span>name<span class="token punctuation">;</span> <span class="token comment">// Europe/London</span>
</code></pre><h2 id="serialization-1">Serialization</h2>
<h3 id="zoned-instant-from-instant-and-time-zone"><a class="heading-link" href="#zoned-instant-from-instant-and-time-zone"></a>Zoned instant from instant and time zone</h3><p>Use the optional parameter of <code>Temporal.Absolute.prototype.toString()</code> to map a Temporal.Absolute instance and a time zone name into a string serialization of the local time in that zone corresponding to the instant in absolute time.</p>
<p>Without the parameter, <code>Temporal.Absolute.prototype.toString()</code> gives a serialization in UTC time.
Using the parameter is useful if you need your serialized strings to be in a specific time zone.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> absoluteTime <span class="token operator">=</span> Temporal<span class="token punctuation">.</span>Absolute<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'2020-01-03T10:41:51Z'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> result <span class="token operator">=</span> absoluteTime<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token string">'Europe/Paris'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>result<span class="token punctuation">,</span> <span class="token string">'2020-01-03T11:41:51+01:00[Europe/Paris]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>Temporal<span class="token punctuation">.</span>Absolute<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>absoluteTime<span class="token punctuation">,</span> Temporal<span class="token punctuation">.</span>Absolute<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// With an offset:</span>

<span class="token keyword">const</span> result2 <span class="token operator">=</span> absoluteTime<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token string">'-07:00'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>result2<span class="token punctuation">,</span> <span class="token string">'2020-01-03T03:41:51-07:00'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// With a Temporal.TimeZone object:</span>

<span class="token keyword">const</span> timeZone <span class="token operator">=</span> Temporal<span class="token punctuation">.</span>TimeZone<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'Asia/Seoul'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> result3 <span class="token operator">=</span> absoluteTime<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>timeZone<span class="token punctuation">)</span><span class="token punctuation">;</span>

assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>result3<span class="token punctuation">,</span> <span class="token string">'2020-01-03T19:41:51+09:00[Asia/Seoul]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h2 id="sorting-1">Sorting</h2>
<p>Each Temporal type has a <code>compare()</code> static method, which can be passed to <code>Array.prototype.sort()</code> as the compare function in order to sort an array of Temporal types.</p>
<h3 id="sort-datetimes"><a class="heading-link" href="#sort-datetimes"></a>Sort DateTimes</h3><p>Sort a list of <code>Temporal.DateTime</code>s, for example in order to get a conference schedule in the correct order.
Sorting other Temporal types would work exactly the same way as this.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">/**
 * getSortedLocalDateTimes will sort an array of zoneless Temporal.DateTime instances by the
 * corresponding local date and time of day (e.g., for building a conference schedule).
 *
 *
 * @param {Temporal.DateTime[]} dateTimes - This is a DateTime instance
 * @param {boolean} direction - reverse
 * @returns {Temporal.DateTime[]} the array from dateTimes, sorted
 */</span>
<span class="token keyword">function</span> <span class="token function">getSortedLocalDateTimes</span><span class="token punctuation">(</span><span class="token parameter">dateTimes<span class="token punctuation">,</span> reverse <span class="token operator">=</span> <span class="token boolean">false</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> newDateTimes <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>dateTimes<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>Temporal<span class="token punctuation">.</span>DateTime<span class="token punctuation">.</span>compare<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> reverse <span class="token operator">?</span> newDateTimes<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> newDateTimes<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Sorting some conferences without timezones for example vue.js Amsterdam 2020</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> Temporal<span class="token punctuation">.</span>DateTime<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  year<span class="token operator">:</span> <span class="token number">2020</span><span class="token punctuation">,</span>
  day<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
  month<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  hour<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
  minute<span class="token operator">:</span> <span class="token number">45</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Introduction</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> Temporal<span class="token punctuation">.</span>DateTime<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  year<span class="token operator">:</span> <span class="token number">2020</span><span class="token punctuation">,</span>
  day<span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span>
  month<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  hour<span class="token operator">:</span> <span class="token number">13</span><span class="token punctuation">,</span>
  minute<span class="token operator">:</span> <span class="token number">10</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Lunch Break</span>
<span class="token keyword">let</span> c <span class="token operator">=</span> Temporal<span class="token punctuation">.</span>DateTime<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  year<span class="token operator">:</span> <span class="token number">2020</span><span class="token punctuation">,</span>
  day<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
  month<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  hour<span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">,</span>
  minute<span class="token operator">:</span> <span class="token number">30</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Coffee Break</span>
<span class="token keyword">const</span> results <span class="token operator">=</span> <span class="token function">getSortedLocalDateTimes</span><span class="token punctuation">(</span><span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>results<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>results<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>results<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h3 id="sort-iso-datetime-strings"><a class="heading-link" href="#sort-iso-datetime-strings"></a>Sort ISO date/time strings</h3><p>Sort a list of ISO 8601 date/time strings, for example to place log entries in order.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">/**
 * getSortedInstants will sort an array of strings (each of which is parseable
 * as a Temporal.Absolute and may or may not include an IANA time zone name)
 * by the corresponding absolute time (e.g., for presenting global log events
 * sequentially).
 *
 *
 * @param {string[]} parseableAbsoluteStrings - a group of ISO Strings
 * @param {boolean} reverse - ascending or descending order
 * @returns {string[]} the array from parseableAbsoluteStrings, sorted
 */</span>
<span class="token keyword">function</span> <span class="token function">getSortedInstants</span><span class="token punctuation">(</span><span class="token parameter">parseableAbsoluteStrings<span class="token punctuation">,</span> reverse <span class="token operator">=</span> <span class="token boolean">false</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> sortedAbsoluteTimes <span class="token operator">=</span> parseableAbsoluteStrings
    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">[</span>v<span class="token punctuation">,</span> Temporal<span class="token punctuation">.</span>Absolute<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span><span class="token punctuation">,</span> abs1<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> abs2<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> Temporal<span class="token punctuation">.</span>Absolute<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>abs1<span class="token punctuation">,</span> abs2<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>str<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> reverse <span class="token operator">?</span> sortedAbsoluteTimes<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> sortedAbsoluteTimes<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token string">'2020-01-23T17:04:36.491865121-08:00'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token string">'2020-02-10T17:04:36.491865121-08:00'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token string">'2019-03-30T01:45:00+01:00[Europe/Berlin]'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> d <span class="token operator">=</span> <span class="token string">'2019-03-16T01:45:00+00:00[Europe/London]'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> e <span class="token operator">=</span> <span class="token string">'2019-03-25T01:45:00-06:00[America/New_York]'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> results <span class="token operator">=</span> <span class="token function">getSortedInstants</span><span class="token punctuation">(</span><span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">,</span> e<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// results will have correct order</span>
assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>results<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'2019-03-16T01:45:00+00:00[Europe/London]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>results<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'2019-03-25T01:45:00-06:00[America/New_York]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>results<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'2019-03-30T01:45:00+01:00[Europe/Berlin]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>results<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'2020-01-23T17:04:36.491865121-08:00'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>results<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'2020-02-10T17:04:36.491865121-08:00'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h2 id="time-zone-conversion-1">Time zone conversion</h2>
<h3 id="preserving-absolute-instant"><a class="heading-link" href="#preserving-absolute-instant"></a>Preserving absolute instant</h3><p>Map a zoned date and time of day into a string serialization of the local time in a target zone at the corresponding instant in absolute time.
This could be used when converting user-input date-time values between time zones.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">/**
 * Takes a local date and time in one time zone, and serializes it to a string
 * expressing the local date and time in another time zone.
 *
 * If `sourceDateTime` doesn't exist in `sourceTimeZone`, or exists twice, then
 * an error will be thrown by default.
 * Usually this is what you want. (FIXME: but is it?)
 * Use `sourceDisambiguationPolicy` to change this behaviour.
 *
 * @param {Temporal.DateTime} sourceDateTime - The local date and time
 * @param {Temporal.TimeZone} sourceTimeZone - The time zone for
 *  `sourceDateTime`
 * @param {Temporal.TimeZone} targetTimeZone - The time zone for the
 *  return value
 * @param {string} [sourceDisambiguationPolicy=reject] - what to do when
 *  `sourceDateTime` is ambiguous
 * @returns {string} String indicating the time with time zone designation
 */</span>
<span class="token keyword">function</span> <span class="token function">getParseableZonedStringWithLocalTimeInOtherZone</span><span class="token punctuation">(</span>
  sourceDateTime<span class="token punctuation">,</span>
  sourceTimeZone<span class="token punctuation">,</span>
  targetTimeZone<span class="token punctuation">,</span>
  sourceDisambiguationPolicy <span class="token operator">=</span> <span class="token string">'reject'</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> instant <span class="token operator">=</span> sourceDateTime<span class="token punctuation">.</span><span class="token function">inTimeZone</span><span class="token punctuation">(</span>sourceTimeZone<span class="token punctuation">,</span> <span class="token punctuation">{</span> disambiguation<span class="token operator">:</span> sourceDisambiguationPolicy <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> instant<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>targetTimeZone<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">getParseableZonedStringWithLocalTimeInOtherZone</span><span class="token punctuation">(</span>
  Temporal<span class="token punctuation">.</span>DateTime<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'2020-01-09T00:00'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  Temporal<span class="token punctuation">.</span>TimeZone<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'America/Chicago'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  Temporal<span class="token punctuation">.</span>TimeZone<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'America/Los_Angeles'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// On this date, when it's midnight in Chicago, it's 10 PM the previous night in LA</span>
assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>result<span class="token punctuation">,</span> <span class="token string">'2020-01-08T22:00-08:00[America/Los_Angeles]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h3 id="utc-offset-for-a-zoned-event-as-a-string"><a class="heading-link" href="#utc-offset-for-a-zoned-event-as-a-string"></a>UTC offset for a zoned event, as a string</h3><p>Use <code>Temporal.TimeZone.getOffsetFor()</code> to map a <code>Temporal.Absolute</code> instance and a time zone into the UTC offset at that instant in that time zone, as a string.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> instant <span class="token operator">=</span> Temporal<span class="token punctuation">.</span>Absolute<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'2020-01-09T00:00Z'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> nyc <span class="token operator">=</span> Temporal<span class="token punctuation">.</span>TimeZone<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'America/New_York'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

nyc<span class="token punctuation">.</span><span class="token function">getOffsetFor</span><span class="token punctuation">(</span>instant<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// => -05:00</span>
</code></pre><h3 id="utc-offset-for-a-zoned-event-as-a-number-of-seconds"><a class="heading-link" href="#utc-offset-for-a-zoned-event-as-a-number-of-seconds"></a>UTC offset for a zoned event, as a number of seconds</h3><p>It&#39;s a bit more complicated to do the above mapping as a number of seconds instead of a string.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">/**
 * Returns the number of seconds in the UTC offset of a time zone, at a
 * particular moment in time.
 *
 * @param {Temporal.Absolute} instant - A moment in time
 * @param {Temporal.TimeZone} timeZone - A time zone to examine
 * @returns {number} The number of seconds in the time zone's UTC offset
 */</span>
<span class="token keyword">function</span> <span class="token function">getUtcOffsetSecondsAtInstant</span><span class="token punctuation">(</span><span class="token parameter">instant<span class="token punctuation">,</span> timeZone</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> utcWallTime <span class="token operator">=</span> instant<span class="token punctuation">.</span><span class="token function">inTimeZone</span><span class="token punctuation">(</span><span class="token string">'UTC'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> localWallTime <span class="token operator">=</span> instant<span class="token punctuation">.</span><span class="token function">inTimeZone</span><span class="token punctuation">(</span>timeZone<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> difference <span class="token operator">=</span> utcWallTime<span class="token punctuation">.</span><span class="token function">difference</span><span class="token punctuation">(</span>localWallTime<span class="token punctuation">,</span> <span class="token punctuation">{</span> largestUnit<span class="token operator">:</span> <span class="token string">'seconds'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> sign <span class="token operator">=</span> Temporal<span class="token punctuation">.</span>DateTime<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>localWallTime<span class="token punctuation">,</span> utcWallTime<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    sign <span class="token operator">*</span>
    <span class="token punctuation">(</span>difference<span class="token punctuation">.</span>seconds <span class="token operator">+</span>
      difference<span class="token punctuation">.</span>milliseconds <span class="token operator">*</span> <span class="token number">1e-3</span> <span class="token operator">+</span>
      difference<span class="token punctuation">.</span>microseconds <span class="token operator">*</span> <span class="token number">1e-6</span> <span class="token operator">+</span>
      difference<span class="token punctuation">.</span>nanoseconds <span class="token operator">*</span> <span class="token number">1e-9</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> instant <span class="token operator">=</span> Temporal<span class="token punctuation">.</span>Absolute<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'2020-01-09T00:00Z'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> nyc <span class="token operator">=</span> Temporal<span class="token punctuation">.</span>TimeZone<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'America/New_York'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token function">getUtcOffsetSecondsAtInstant</span><span class="token punctuation">(</span>instant<span class="token punctuation">,</span> nyc<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">18000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h3 id="offset-between-two-time-zones-at-an-instant"><a class="heading-link" href="#offset-between-two-time-zones-at-an-instant"></a>Offset between two time zones at an instant</h3><p>With a small variation on the previous recipe we can map a <code>Temporal.Absolute</code> instance and two time zones into the signed difference of UTC offsets between those time zones at that instant, as a number of seconds.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">/**
 * Returns the number of seconds' difference between the UTC offsets of two time
 * zones, at a particular moment in time.
 *
 * @param {Temporal.Absolute} instant - A moment in time
 * @param {Temporal.TimeZone} sourceTimeZone - A time zone to examine
 * @param {Temporal.TimeZone} targetTimeZone - A second time zone to examine
 * @returns {number} The number of seconds difference between the time zones'
 *   UTC offsets
 */</span>
<span class="token keyword">function</span> <span class="token function">getUtcOffsetDifferenceSecondsAtInstant</span><span class="token punctuation">(</span><span class="token parameter">instant<span class="token punctuation">,</span> sourceTimeZone<span class="token punctuation">,</span> targetTimeZone</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> sourceWallTime <span class="token operator">=</span> instant<span class="token punctuation">.</span><span class="token function">inTimeZone</span><span class="token punctuation">(</span>sourceTimeZone<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> targetWallTime <span class="token operator">=</span> instant<span class="token punctuation">.</span><span class="token function">inTimeZone</span><span class="token punctuation">(</span>targetTimeZone<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> difference <span class="token operator">=</span> sourceWallTime<span class="token punctuation">.</span><span class="token function">difference</span><span class="token punctuation">(</span>targetWallTime<span class="token punctuation">,</span> <span class="token punctuation">{</span> largestUnit<span class="token operator">:</span> <span class="token string">'seconds'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> sign <span class="token operator">=</span> Temporal<span class="token punctuation">.</span>DateTime<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>targetWallTime<span class="token punctuation">,</span> sourceWallTime<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    sign <span class="token operator">*</span>
    <span class="token punctuation">(</span>difference<span class="token punctuation">.</span>seconds <span class="token operator">+</span>
      difference<span class="token punctuation">.</span>milliseconds <span class="token operator">*</span> <span class="token number">1e-3</span> <span class="token operator">+</span>
      difference<span class="token punctuation">.</span>microseconds <span class="token operator">*</span> <span class="token number">1e-6</span> <span class="token operator">+</span>
      difference<span class="token punctuation">.</span>nanoseconds <span class="token operator">*</span> <span class="token number">1e-9</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> instant <span class="token operator">=</span> Temporal<span class="token punctuation">.</span>Absolute<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'2020-01-09T00:00Z'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> nyc <span class="token operator">=</span> Temporal<span class="token punctuation">.</span>TimeZone<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'America/New_York'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> chicago <span class="token operator">=</span> Temporal<span class="token punctuation">.</span>TimeZone<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'America/Chicago'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// At this instant, Chicago is 3600 seconds earlier than New York</span>
assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token function">getUtcOffsetDifferenceSecondsAtInstant</span><span class="token punctuation">(</span>instant<span class="token punctuation">,</span> nyc<span class="token punctuation">,</span> chicago<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">3600</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h2 id="arithmetic-1">Arithmetic</h2>
<h3 id="unit-constrained-duration-between-now-and-a-pastfuture-zoned-event"><a class="heading-link" href="#unit-constrained-duration-between-now-and-a-pastfuture-zoned-event"></a>Unit-constrained duration between now and a past/future zoned event</h3><p>Map two Temporal.Absolute instances into an ascending/descending order indicator and a Temporal.Duration instance representing the duration between the two instants without using units coarser than specified (e.g., for presenting a meaningful countdown with vs. without using months or days).</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">/**
 * @typedef {Object} ElapsedDuration
 * @property {string} return.sign - "+" or "-"
 * @property {Temporal.Duration} return.duration - Elapsed duration
 */</span>
<span class="token comment">/**
 * Compute the difference between two instants, suitable for use in a countdown,
 * for example.
 *
 * @param {Temporal.Absolute} then - Instant since when to measure the duration
 * @param {Temporal.Absolute} now - Instant until when to measure the duration
 * @param {string} [largestUnit=days] - Largest time unit to have in the result
 * @returns {ElapsedDuration} Time between `then` and `now`
 */</span>
<span class="token keyword">function</span> <span class="token function">getElapsedDurationSinceInstant</span><span class="token punctuation">(</span>then<span class="token punctuation">,</span> now<span class="token punctuation">,</span> largestUnit <span class="token operator">=</span> <span class="token string">'days'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> sign <span class="token operator">=</span> Temporal<span class="token punctuation">.</span>Absolute<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>now<span class="token punctuation">,</span> then<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">'-'</span> <span class="token operator">:</span> <span class="token string">'+'</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> duration <span class="token operator">=</span> now<span class="token punctuation">.</span><span class="token function">difference</span><span class="token punctuation">(</span>then<span class="token punctuation">,</span> <span class="token punctuation">{</span> largestUnit <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> sign<span class="token punctuation">,</span> duration <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">getElapsedDurationSinceInstant</span><span class="token punctuation">(</span>
  Temporal<span class="token punctuation">.</span>Absolute<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'2020-01-09T00:00Z'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  Temporal<span class="token punctuation">.</span>Absolute<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'2020-01-09T04:00Z'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token punctuation">.</span>sign<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token punctuation">.</span>duration<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token string">'+PT4H'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> result2 <span class="token operator">=</span> <span class="token function">getElapsedDurationSinceInstant</span><span class="token punctuation">(</span>
  Temporal<span class="token punctuation">.</span>Absolute<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'2020-01-09T04:00Z'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  Temporal<span class="token punctuation">.</span>Absolute<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'2020-01-09T00:00Z'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token string">'minutes'</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result2<span class="token punctuation">.</span>sign<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result2<span class="token punctuation">.</span>duration<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token string">'-PT240M'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Example of using it in a countdown:</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> sign<span class="token punctuation">,</span> duration <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">getElapsedDurationSinceInstant</span><span class="token punctuation">(</span>
  Temporal<span class="token punctuation">.</span>Absolute<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'2020-04-01T13:00-07:00[America/Los_Angeles]'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  Temporal<span class="token punctuation">.</span>now<span class="token punctuation">.</span><span class="token function">absolute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">It's </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>duration<span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>sign <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">'until'</span> <span class="token operator">:</span> <span class="token string">'since'</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> the TC39 Temporal presentation</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre><h3 id="comparison-of-an-instant-to-business-hours"><a class="heading-link" href="#comparison-of-an-instant-to-business-hours"></a>Comparison of an instant to business hours</h3><p>This example takes a roster of opening and closing times for a business, and maps a localized date and time of day into a time-sensitive state indicator (&quot;opening soon&quot; vs. &quot;open&quot; vs. &quot;closing soon&quot; vs. &quot;closed&quot;).</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">/**
 * Compare the given time to the business hours of a business located in a
 * particular time zone, and return a string indicating whether the business is
 * open, closed, opening soon, or closing soon. The length of "soon" can be
 * controlled using the `soonWindow` parameter.
 *
 * @param {Temporal.Absolute} now - Time at which to consider whether the
 *  business is open
 * @param {Temporal.TimeZone} timeZone - Time zone in which the business is
 *  located
 * @param {(Object|null)[]} businessHours - Array of length 7 indicating
 *  business hours during the week
 * @param {Temporal.Time} businessHours[].open - Time at which the business
 *  opens
 * @param {Temporal.Time} businessHours[].close - Time at which the business
 *  closes
 * @param {Temporal.Duration} soonWindow - Length of time before the opening or
 *  closing time during which the business should be considered "opening soon"
 *  or "closing soon"
 * @returns {string} "open", "closed", "opening soon", or "closing soon"
 */</span>
<span class="token keyword">function</span> <span class="token function">getBusinessOpenStateText</span><span class="token punctuation">(</span><span class="token parameter">now<span class="token punctuation">,</span> timeZone<span class="token punctuation">,</span> businessHours<span class="token punctuation">,</span> soonWindow</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">inRange</span><span class="token punctuation">(</span><span class="token parameter">dateTime<span class="token punctuation">,</span> start<span class="token punctuation">,</span> end</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Temporal<span class="token punctuation">.</span>DateTime<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>dateTime<span class="token punctuation">,</span> start<span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> Temporal<span class="token punctuation">.</span>DateTime<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>dateTime<span class="token punctuation">,</span> end<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> dateTime <span class="token operator">=</span> now<span class="token punctuation">.</span><span class="token function">inTimeZone</span><span class="token punctuation">(</span>timeZone<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> weekday <span class="token operator">=</span> dateTime<span class="token punctuation">.</span>dayOfWeek <span class="token operator">%</span> <span class="token number">7</span><span class="token punctuation">;</span> <span class="token comment">// convert to 0-based, for array indexing</span>

  <span class="token comment">// Because of times wrapping around at midnight, we may need to consider</span>
  <span class="token comment">// yesterday's and tomorrow's hours as well</span>
  <span class="token keyword">const</span> today <span class="token operator">=</span> dateTime<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> yesterday <span class="token operator">=</span> today<span class="token punctuation">.</span><span class="token function">minus</span><span class="token punctuation">(</span><span class="token punctuation">{</span> days<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> tomorrow <span class="token operator">=</span> today<span class="token punctuation">.</span><span class="token function">plus</span><span class="token punctuation">(</span><span class="token punctuation">{</span> days<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Push any of the businessHours that overlap today's date into an array,</span>
  <span class="token comment">// that we will subsequently check. Convert the businessHours Times into</span>
  <span class="token comment">// DateTimes so that they no longer wrap around.</span>
  <span class="token keyword">const</span> businessHoursOverlappingToday <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> yesterdayHours <span class="token operator">=</span> businessHours<span class="token punctuation">[</span><span class="token punctuation">(</span>weekday <span class="token operator">+</span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>yesterdayHours<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> open<span class="token punctuation">,</span> close <span class="token punctuation">}</span> <span class="token operator">=</span> yesterdayHours<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>Temporal<span class="token punctuation">.</span>Time<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>close<span class="token punctuation">,</span> open<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      businessHoursOverlappingToday<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        open<span class="token operator">:</span> yesterday<span class="token punctuation">.</span><span class="token function">withTime</span><span class="token punctuation">(</span>open<span class="token punctuation">)</span><span class="token punctuation">,</span>
        close<span class="token operator">:</span> today<span class="token punctuation">.</span><span class="token function">withTime</span><span class="token punctuation">(</span>close<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> todayHours <span class="token operator">=</span> businessHours<span class="token punctuation">[</span>weekday<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>todayHours<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> open<span class="token punctuation">,</span> close <span class="token punctuation">}</span> <span class="token operator">=</span> todayHours<span class="token punctuation">;</span>
    businessHoursOverlappingToday<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      open<span class="token operator">:</span> today<span class="token punctuation">.</span><span class="token function">withTime</span><span class="token punctuation">(</span>open<span class="token punctuation">)</span><span class="token punctuation">,</span>
      close<span class="token operator">:</span> <span class="token punctuation">(</span>Temporal<span class="token punctuation">.</span>Time<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>close<span class="token punctuation">,</span> open<span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">?</span> today <span class="token operator">:</span> tomorrow<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withTime</span><span class="token punctuation">(</span>close<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Check if any of the candidate business hours include the given time</span>
  <span class="token keyword">const</span> soon <span class="token operator">=</span> dateTime<span class="token punctuation">.</span><span class="token function">plus</span><span class="token punctuation">(</span>soonWindow<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> openNow <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> openSoon <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token punctuation">{</span> open<span class="token punctuation">,</span> close <span class="token punctuation">}</span> <span class="token keyword">of</span> businessHoursOverlappingToday<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    openNow <span class="token operator">=</span> openNow <span class="token operator">||</span> <span class="token function">inRange</span><span class="token punctuation">(</span>dateTime<span class="token punctuation">,</span> open<span class="token punctuation">,</span> close<span class="token punctuation">)</span><span class="token punctuation">;</span>
    openSoon <span class="token operator">=</span> openSoon <span class="token operator">||</span> <span class="token function">inRange</span><span class="token punctuation">(</span>soon<span class="token punctuation">,</span> open<span class="token punctuation">,</span> close<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>openNow<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>openSoon<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">'closing soon'</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">'open'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>openSoon<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">'opening soon'</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token string">'closed'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// For example, a restaurant or bar might have opening hours that go past</span>
<span class="token comment">// midnight; make sure this is handled correctly</span>
<span class="token keyword">const</span> businessHours <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">/* Sun */</span> <span class="token punctuation">{</span> open<span class="token operator">:</span> Temporal<span class="token punctuation">.</span>Time<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'13:00'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> close<span class="token operator">:</span> Temporal<span class="token punctuation">.</span>Time<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'20:30'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">/* Mon */</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token comment">// closed Mondays</span>
  <span class="token comment">/* Tue */</span> <span class="token punctuation">{</span> open<span class="token operator">:</span> Temporal<span class="token punctuation">.</span>Time<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'11:00'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> close<span class="token operator">:</span> Temporal<span class="token punctuation">.</span>Time<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'20:30'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">/* Wed */</span> <span class="token punctuation">{</span> open<span class="token operator">:</span> Temporal<span class="token punctuation">.</span>Time<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'11:00'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> close<span class="token operator">:</span> Temporal<span class="token punctuation">.</span>Time<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'20:30'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">/* Thu */</span> <span class="token punctuation">{</span> open<span class="token operator">:</span> Temporal<span class="token punctuation">.</span>Time<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'11:00'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> close<span class="token operator">:</span> Temporal<span class="token punctuation">.</span>Time<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'22:00'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">/* Fri */</span> <span class="token punctuation">{</span> open<span class="token operator">:</span> Temporal<span class="token punctuation">.</span>Time<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'11:00'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> close<span class="token operator">:</span> Temporal<span class="token punctuation">.</span>Time<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'00:00'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">/* Sat */</span> <span class="token punctuation">{</span> open<span class="token operator">:</span> Temporal<span class="token punctuation">.</span>Time<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'11:00'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> close<span class="token operator">:</span> Temporal<span class="token punctuation">.</span>Time<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'02:00'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> now <span class="token operator">=</span> Temporal<span class="token punctuation">.</span>Absolute<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'2019-04-07T00:00+01:00[Europe/Berlin]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> tz <span class="token operator">=</span> Temporal<span class="token punctuation">.</span>TimeZone<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'Europe/Berlin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> saturdayNightState <span class="token operator">=</span> <span class="token function">getBusinessOpenStateText</span><span class="token punctuation">(</span>now<span class="token punctuation">,</span> tz<span class="token punctuation">,</span> businessHours<span class="token punctuation">,</span> Temporal<span class="token punctuation">.</span>Duration<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">{</span> minutes<span class="token operator">:</span> <span class="token number">30</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>saturdayNightState<span class="token punctuation">,</span> <span class="token string">'open'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h3 id="flight-arrivaldepartureduration"><a class="heading-link" href="#flight-arrivaldepartureduration"></a>Flight arrival/departure/duration</h3><p>Map localized trip departure and arrival times into trip duration in units no larger than hours.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">/**
 * Given localized departure and arrival times, get a trip duration suitable
 * for display in an airline ticket website, for example.
 *
 * @param {string} parseableDeparture - Departure time with time zone
 * @param {string} parseableArrival - Arrival time with time zone
 * @returns {Temporal.Duration} A duration with units no larger than hours
 */</span>
<span class="token keyword">function</span> <span class="token function">getTripDurationInHrMinSec</span><span class="token punctuation">(</span><span class="token parameter">parseableDeparture<span class="token punctuation">,</span> parseableArrival</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> departure <span class="token operator">=</span> Temporal<span class="token punctuation">.</span>Absolute<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>parseableDeparture<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> arrival <span class="token operator">=</span> Temporal<span class="token punctuation">.</span>Absolute<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>parseableArrival<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> departure<span class="token punctuation">.</span><span class="token function">difference</span><span class="token punctuation">(</span>arrival<span class="token punctuation">,</span> <span class="token punctuation">{</span> largestUnit<span class="token operator">:</span> <span class="token string">'hours'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> flightTime <span class="token operator">=</span> <span class="token function">getTripDurationInHrMinSec</span><span class="token punctuation">(</span>
  <span class="token string">'2020-03-08T11:55:00+08:00[Asia/Hong_Kong]'</span><span class="token punctuation">,</span>
  <span class="token string">'2020-03-08T09:50:00-07:00[America/Los_Angeles]'</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>flightTime<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token string">'PT12H55M'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>Map localized departure time and duration into localized arrival time.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">/**
 * Given a localized departure time and a flight duration, get a local arrival
 * time in the destination time zone.
 *
 * @param {string} parseableDeparture - Departure time with time zone
 * @param {Temporal.Duration} flightTime - Duration of the flight
 * @param {Temporal.TimeZone} destinationTimeZone - Time zone in which the
 *  flight's destination is located
 * @returns {Temporal.DateTime} Local arrival time
 */</span>
<span class="token keyword">function</span> <span class="token function">getLocalizedArrival</span><span class="token punctuation">(</span><span class="token parameter">parseableDeparture<span class="token punctuation">,</span> flightTime<span class="token punctuation">,</span> destinationTimeZone</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> departure <span class="token operator">=</span> Temporal<span class="token punctuation">.</span>Absolute<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>parseableDeparture<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> arrival <span class="token operator">=</span> departure<span class="token punctuation">.</span><span class="token function">plus</span><span class="token punctuation">(</span>flightTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> arrival<span class="token punctuation">.</span><span class="token function">inTimeZone</span><span class="token punctuation">(</span>destinationTimeZone<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> arrival <span class="token operator">=</span> <span class="token function">getLocalizedArrival</span><span class="token punctuation">(</span>
  <span class="token string">'2020-03-08T11:55:00+08:00[Asia/Hong_Kong]'</span><span class="token punctuation">,</span>
  Temporal<span class="token punctuation">.</span>Duration<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">{</span> minutes<span class="token operator">:</span> <span class="token number">775</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token string">'America/Los_Angeles'</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>arrival<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token string">'2020-03-08T09:50'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h3 id="nth-weekday-of-the-month"><a class="heading-link" href="#nth-weekday-of-the-month"></a>Nth weekday of the month</h3><p>Example of getting a <code>Temporal.Date</code> representing the first Tuesday of the given <code>Temporal.YearMonth</code>, adaptable to other weekdays.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">/**
 * Gets the first Tuesday of the month and returns its date
 *
 * @param {Temporal.YearMonth} queriedMonth - YearMonth instance to query
 * @returns {Temporal.Date} Temporal.Date Instance which gives first tuesday
 */</span>
<span class="token keyword">function</span> <span class="token function">getFirstTuesday</span><span class="token punctuation">(</span><span class="token parameter">queriedMonth</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// We first need to convert to a date</span>
  <span class="token keyword">const</span> firstOfMonth <span class="token operator">=</span> queriedMonth<span class="token punctuation">.</span><span class="token function">withDay</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// We have Monday = 1, Sunday = 7, and we want to add a positive number</span>
  <span class="token comment">// smaller than 7 to get to the first Tuesday.</span>
  <span class="token comment">// If we're already on a Tuesday (2) then we want to add 0.</span>
  <span class="token comment">// So for the first of the month being a Monday through Sunday the additions are:</span>
  <span class="token comment">//    1, 0, 6, 5, 4, 3, 2 which is given by that formula.</span>
  <span class="token comment">// This lookup table makes this example easier to read, but you can also</span>
  <span class="token comment">// calculate the answer: (7 + desiredWeekday - firstOfMonth.dayOfWeek) % 7</span>
  <span class="token keyword">return</span> firstOfMonth<span class="token punctuation">.</span><span class="token function">plus</span><span class="token punctuation">(</span><span class="token punctuation">{</span> days<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span>firstOfMonth<span class="token punctuation">.</span>dayOfWeek <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> myMonth <span class="token operator">=</span> Temporal<span class="token punctuation">.</span>YearMonth<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'2020-02'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> firstTuesdayOfMonth <span class="token operator">=</span> <span class="token function">getFirstTuesday</span><span class="token punctuation">(</span>myMonth<span class="token punctuation">)</span><span class="token punctuation">;</span>
assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>firstTuesdayOfMonth<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'2020-02-04'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>firstTuesdayOfMonth<span class="token punctuation">.</span>dayOfWeek<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>    <footer>
      <p>
        This page includes a script which loads an implementation of Temporal in your browser.
        You can open a console in your browser's developer tools and try it out directly!
      </p>
      <p>View this or help contribute on <a href="https://github.com/tc39/proposal-temporal">GitHub</a>.</p>
    </footer>
  </body>
</html>
